#!/usr/bin/env node
var Y=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var nt=Object.getOwnPropertyNames;var ot=Object.prototype.hasOwnProperty;var K=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,s)=>(typeof require<"u"?require:t)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),me=e=>t=>{var s=e[t];if(s)return s();throw new Error("Module not found in bundle: "+t)};var C=(e,t)=>()=>(e&&(t=e(e=0)),t);var Z=(e,t)=>{for(var s in t)Y(e,s,{get:t[s],enumerable:!0})},it=(e,t,s,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of nt(t))!ot.call(e,o)&&o!==s&&Y(e,o,{get:()=>t[o],enumerable:!(n=st(t,o))||n.enumerable});return e};var Q=e=>it(Y({},"__esModule",{value:!0}),e);import{access as rt,readFile as fe,writeFile as ct}from"fs/promises";import{parse as lt}from"jsonc-parser";var a,g,ge,S,dt,ut,N,p=C(()=>{"use strict";a=async e=>{try{return await rt(e),!0}catch{return!1}},g=async()=>{if(await a("pnpm-workspace.yaml"))return!0;try{let e=lt(await fe("package.json","utf-8"));return e?!!e.workspaces||!!e.workspace:!1}catch{return!1}},ge=`
888     888 888    88888888888 8888888b.         d8888  .d8888b. 8888888 88888888888 8888888888 
888     888 888        888     888   Y88b       d88888 d88P  Y88b  888       888     888        
888     888 888        888     888    888      d88P888 888    888  888       888     888        
888     888 888        888     888   d88P     d88P 888 888         888       888     8888888    
888     888 888        888     8888888P"     d88P  888 888         888       888     888        
888     888 888        888     888 T88b     d88P   888 888    888  888       888     888        
Y88b. .d88P 888        888     888  T88b   d8888888888 Y88b  d88P  888       888     888        
 "Y88888P"  88888888   888     888   T88b d88P     888  "Y8888P" 8888888     888     8888888888
`,S=async({dependencies:e,devDependencies:t})=>{let s=await fe("package.json","utf8"),n=JSON.parse(s),o={...n,devDependencies:{...n.devDependencies,...t},dependencies:{...n.dependencies,...e}};await ct("package.json",JSON.stringify(o,null,2))},dt=/[ $(){}[\]&|;<>!"'`*?#~]/,ut=/'/g,N=e=>e.map(t=>dt.test(t)?`'${t.replace(ut,"'\\''")}' `:t)});var Be={};Z(Be,{husky:()=>v});import{mkdir as Yt,readFile as Kt,writeFile as Je}from"fs/promises";import{addDevDependency as Zt,dlxCommand as Le}from"nypm";var ze,z,v,re=C(()=>{"use strict";p();ze=e=>`#!/bin/sh
# Exit on any error
set -e

# Check if there are any staged files
if [ -z "$(git diff --cached --name-only)" ]; then
  echo "No staged files to format"
  exit 0
fi

# Store the hash of staged changes to detect modifications
STAGED_HASH=$(git diff --cached | sha256sum | cut -d' ' -f1)

# Save list of staged files (handling all file states)
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)
PARTIALLY_STAGED=$(git diff --name-only)

# Stash unstaged changes to preserve working directory
# --keep-index keeps staged changes in working tree
git stash push --quiet --keep-index --message "pre-commit-stash" || true
STASHED=$?

# Run formatter on the staged files
${e}
FORMAT_EXIT_CODE=$?

# Restore working directory state
if [ $STASHED -eq 0 ]; then
  # Re-stage the formatted files
  if [ -n "$STAGED_FILES" ]; then
    echo "$STAGED_FILES" | while IFS= read -r file; do
      if [ -f "$file" ]; then
        git add "$file"
      fi
    done
  fi
  
  # Restore unstaged changes
  git stash pop --quiet || true
  
  # Restore partial staging if files were partially staged
  if [ -n "$PARTIALLY_STAGED" ]; then
    for file in $PARTIALLY_STAGED; do
      if [ -f "$file" ] && echo "$STAGED_FILES" | grep -q "^$file$"; then
        # File was partially staged - need to unstage the unstaged parts
        git restore --staged "$file" 2>/dev/null || true
        git add -p "$file" < /dev/null 2>/dev/null || git add "$file"
      fi
    done
  fi
else
  # No stash was created, just re-add the formatted files
  if [ -n "$STAGED_FILES" ]; then
    echo "$STAGED_FILES" | while IFS= read -r file; do
      if [ -f "$file" ]; then
        git add "$file"
      fi
    done
  fi
fi

# Check if staged files actually changed
NEW_STAGED_HASH=$(git diff --cached | sha256sum | cut -d' ' -f1)
if [ "$STAGED_HASH" != "$NEW_STAGED_HASH" ]; then
  echo "\u2728 Files formatted by Ultracite"
fi

exit $FORMAT_EXIT_CODE
`,z="./.husky/pre-commit",v={exists:()=>a(z),install:async e=>{await Zt("husky",{packageManager:e,workspace:await g()})},create:async e=>{await Yt(".husky",{recursive:!0});let t=Le(e,"ultracite",{args:["fix"],short:e==="npm"}),s=ze(t);await Je(z,s)},update:async e=>{let t=await Kt(z,"utf-8"),s=Le(e,"ultracite",{args:["fix"],short:e==="npm"}),n=ze(s);await Je(z,`${t}
${n}`)}}});var He={};Z(He,{lefthook:()=>x});import{execSync as Qt}from"child_process";import{readFile as es,writeFile as $}from"fs/promises";import{addDevDependency as ts,dlxCommand as Ge}from"nypm";var ss,ns,We,w,qe,x,ce=C(()=>{"use strict";p();ss=/(pre-commit:\s*\n\s*jobs:\s*\n)/,ns=/(pre-commit:\s*\n)/,We=e=>Ge(e,"ultracite",{args:["fix"],short:e==="npm"}),w="./lefthook.yml",qe=e=>`pre-commit:
  jobs:
    - run: ${We(e)}
      glob: 
        - "*.js"
        - "*.jsx"
        - "*.ts"
        - "*.tsx"
        - "*.json"
        - "*.jsonc"
        - "*.css"
      stage_fixed: true
`,x={exists:()=>a(w),install:async e=>{await ts("lefthook",{packageManager:e,workspace:await g()});let t=Ge(e,"lefthook",{args:["install"],short:e==="npm"});Qt(t)},create:async e=>{let t=qe(e);await $(w,t)},update:async e=>{let t=await es(w,"utf-8"),s=We(e),n=qe(e);if(t.includes(s))return;if(t.startsWith("# EXAMPLE USAGE:")){await $(w,n);return}if(t.includes("pre-commit:"))if(t.includes("jobs:")){let i=`    - run: ${s}
      glob: 
        - "*.js"
        - "*.jsx"
        - "*.ts"
        - "*.tsx"
        - "*.json"
        - "*.jsonc"
        - "*.css"
      stage_fixed: true`,r=t.replace(ss,`$1${i}
`);await $(w,r)}else{let i=`  jobs:
    - run: ${s}
      glob: 
        - "*.js"
        - "*.jsx"
        - "*.ts"
        - "*.tsx"
        - "*.json"
        - "*.jsonc"
        - "*.css"
      stage_fixed: true`,r=t.replace(ns,`$1${i}
`);await $(w,r)}else await $(w,`${t}
${n}`)}}});var os,le=C(()=>{os=me({"./husky.ts":()=>(re(),Q(Be)),"./lefthook.ts":()=>(ce(),Q(He)),"./lint-staged.ts":()=>(de(),Q(Ve))})});var Ve={};Z(Ve,{lintStaged:()=>D});import{readFile as B,writeFile as b}from"fs/promises";import{pathToFileURL as is}from"url";import F from"deepmerge";import{parse as pe}from"jsonc-parser";import{addDevDependency as as,dlxCommand as rs}from"nypm";var h,Xe,cs,ls,ds,us,ps,ms,fs,gs,hs,ue,ys,D,de=C(()=>{"use strict";p();le();h=e=>({"*.{js,jsx,ts,tsx,json,jsonc,css,scss,md,mdx}":[rs(e,"ultracite",{args:["fix"],short:e==="npm"})]}),Xe=["./package.json","./.lintstagedrc.json","./.lintstagedrc.js","./.lintstagedrc.cjs","./.lintstagedrc.mjs","./lint-staged.config.js","./lint-staged.config.cjs","./lint-staged.config.mjs","./.lintstagedrc.yaml","./.lintstagedrc.yml","./.lintstagedrc"],cs=(e,t,s,n)=>{let o=e.trim();if(o.includes(":")&&!o.startsWith("-")){s&&n.length>0&&(t[s]=n);let[i,...r]=o.split(":"),l=r.join(":").trim(),u=i.trim().replace(/['"]/g,"");return l&&l!==""?(l.startsWith("[")&&l.endsWith("]")?t[u]=l.slice(1,-1).split(",").map(d=>d.trim().replace(/['"]/g,"")):t[u]=l.replace(/['"]/g,""),{newCurrentKey:null,newCurrentArray:[]}):{newCurrentKey:u,newCurrentArray:[]}}if(o.startsWith("-")&&s){let i=[...n,o.slice(1).trim().replace(/['"]/g,"")];return{newCurrentKey:s,newCurrentArray:i}}return{newCurrentKey:s,newCurrentArray:n}},ls=e=>{let t=e.split(`
`).filter(i=>i.trim()&&!i.trim().startsWith("#")),s={},n=null,o=[];for(let i of t){let r=cs(i,s,n,o);n=r.newCurrentKey,o=r.newCurrentArray}return n&&o.length>0&&(s[n]=o),s},ds=e=>{let t="";for(let[s,n]of Object.entries(e))if(Array.isArray(n)){t+=`${s}:
`;for(let o of n)t+=`  - '${o}'
`}else t+=`${s}: '${n}'
`;return t},us=async()=>{try{let e=pe(await B("./package.json","utf-8"));return e?e.type==="module":!1}catch{return!1}},ps=async e=>{let t=pe(await B("./package.json","utf-8"));t&&(t["lint-staged"]?t["lint-staged"]=F(t["lint-staged"],h(e)):t["lint-staged"]=h(e),await b("./package.json",JSON.stringify(t,null,2)))},ms=async(e,t)=>{let s=await B(e,"utf-8"),n=pe(s);if(!n)return;let o=F(n,h(t));await b(e,JSON.stringify(o,null,2))},fs=async(e,t)=>{let s=await B(e,"utf-8"),n=ls(s);if(!n)return;let o=F(n,h(t));await b(e,ds(o))},gs=async(e,t)=>{let o=(await import(is(e).href)).default||{},i=F(o,h(t)),r=`export default ${JSON.stringify(i,null,2)};
`;await b(e,r)},hs=async(e,t)=>{delete K.cache[K.resolve(`./${e}`)];let s=os(`./${e}`),n=F(s,h(t)),o=`module.exports = ${JSON.stringify(n,null,2)};
`;await b(e,o)},ue=async e=>{await b(".lintstagedrc.json",JSON.stringify(h(e),null,2))},ys=async(e,t)=>{if(e==="./package.json"){await ps(t);return}if(e.endsWith(".json")||e==="./.lintstagedrc"){await ms(e,t);return}if(e.endsWith(".yaml")||e.endsWith(".yml")){await fs(e,t);return}let s=await us();if(e.endsWith(".mjs")||e.endsWith(".js")&&s){try{await gs(e,t)}catch{await ue(t)}return}if(e.endsWith(".cjs")||e.endsWith(".js")&&!s)try{await hs(e,t)}catch{await ue(t)}},D={exists:async()=>{for(let e of Xe)if(await a(e))return!0;return!1},install:async e=>{await as("lint-staged",{packageManager:e,workspace:await g()})},create:async e=>{await b(".lintstagedrc.json",JSON.stringify(h(e),null,2))},update:async e=>{let t=null;for(let s of Xe)if(await a(s)){t=s;break}if(!t){await ue(e);return}await ys(t,e)}}});import{initTRPC as Is}from"@trpc/server";import{createCli as Us}from"trpc-cli";import c from"zod";var y={name:"ultracite",description:"The AI-ready formatter that helps you write and generate code faster.",version:"5.6.1",type:"module",bin:{ultracite:"dist/index.js"},files:["biome.jsonc","dist","README.md"],scripts:{build:"tsup",test:"vitest run","test:coverage":"vitest run --coverage"},main:"./biome.jsonc",author:"Hayden Bleasel <hello@haydenbleasel.com>",bugs:{url:"https://github.com/haydenbleasel/ultracite/issues"},homepage:"https://github.com/haydenbleasel/ultracite#readme",keywords:["ultracite","biome","linter","formatter","fixer"],license:"MIT",publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},repository:{type:"git",url:"git+https://github.com/haydenbleasel/ultracite.git"},devDependencies:{"@biomejs/biome":"2.2.5","@types/node":"^24.5.2","@vitest/coverage-v8":"3.2.4",tsup:"^8.5.0",turbo:"^2.5.8",vitest:"^3.2.4"},dependencies:{"@clack/prompts":"^0.11.0","@trpc/server":"^11.5.1",deepmerge:"^4.3.1","jsonc-parser":"^3.3.1",nypm:"^0.6.2","trpc-cli":"^0.11.0",zod:"^4.1.11"},packageManager:"pnpm@10.17.0"};p();import{spawnSync as pt}from"child_process";import he from"process";var ee=e=>{let t=["npx","@biomejs/biome","check","--no-errors-on-unmatched"];e.length>0?t.push(...N(e)):t.push("./");let s=t.join(" "),n=pt(s,{stdio:"inherit",shell:!0});n.error&&(console.error("Failed to run Ultracite:",n.error.message),he.exit(1)),n.status!==0&&he.exit(n.status??1)};import{spawnSync as Pt}from"child_process";import{existsSync as P}from"fs";import{readFile as De}from"fs/promises";import{join as R}from"path";import{parse as Rt}from"jsonc-parser";p();import{readFile as ye,unlink as mt,writeFile as ft}from"fs/promises";import{parse as we}from"jsonc-parser";import{removeDependency as gt}from"nypm";var I=[".eslintrc",".eslintrc.js",".eslintrc.json",".eslintrc.yml",".eslintrc.yaml",".eslintrc.config.js","eslint.config.js","eslint.config.mjs","eslint.config.cjs",".eslintignore"],be=async()=>{try{let e=await ye("package.json","utf-8"),t=we(e);if(!t||typeof t!="object")return[];let s=t.dependencies||{},n=t.devDependencies||{},o={...s,...n};return Object.keys(o).filter(i=>i.includes("eslint"))}catch{return[]}},ht=async(e,t)=>{if(t.length!==0)try{for(let s of t)await gt(s,{packageManager:e})}catch(s){console.warn(s)}},yt=async()=>{let e=[];for(let t of I)if(await a(t))try{await mt(t),e.push(t)}catch(s){console.warn(s)}return e},wt=async()=>{let e="./.vscode/settings.json";if(!await a(e))return!1;try{let t=await ye(e,"utf-8"),s=we(t);if(!s||typeof s!="object")return!1;let n=!1,o={...s},i=["eslint.enable","eslint.format.enable","eslint.validate","eslint.workingDirectories","eslint.codeAction.showDocumentation","eslint.run","eslint.autoFixOnSave","eslint.quiet","eslint.packageManager","eslint.options","eslint.trace.server"];for(let r of i)r in o&&(delete o[r],n=!0);if("editor.codeActionsOnSave"in o){let r=o["editor.codeActionsOnSave"];if(r&&typeof r=="object"){let l=["source.fixAll.eslint","source.organizeImports.eslint"];for(let u of l)u in r&&(delete r[u],n=!0);Object.keys(r).length===0&&(o["editor.codeActionsOnSave"]=void 0)}}return n?(await ft(e,JSON.stringify(o,null,2)),!0):!1}catch(t){return console.warn(t),!1}},bt=async()=>{if((await be()).length>0)return!0;for(let t of I)if(await a(t))return!0;return!1},te={hasEsLint:bt,remove:async e=>{let t=await be();await ht(e,t);let s=await yt(),n=await wt();return{packagesRemoved:t,filesRemoved:s,vsCodeCleaned:n}}};p();import{readFile as ke,unlink as kt,writeFile as vt}from"fs/promises";import{parse as ve}from"jsonc-parser";import{removeDependency as xt}from"nypm";var U=[".prettierrc",".prettierrc.js",".prettierrc.json",".prettierrc.yml",".prettierrc.yaml",".prettierrc.config.js","prettier.config.js","prettier.config.mjs",".prettierignore"],xe=async()=>{try{let e=await ke("package.json","utf-8"),t=ve(e);if(!t||typeof t!="object")return[];let s=t.dependencies||{},n=t.devDependencies||{},o={...s,...n};return Object.keys(o).filter(i=>i.includes("prettier"))}catch{return[]}},Dt=async(e,t)=>{if(t.length!==0)try{for(let s of t)await xt(s,{packageManager:e})}catch(s){console.warn(s)}},jt=async()=>{let e=[];for(let t of U)if(await a(t))try{await kt(t),e.push(t)}catch(s){console.warn(s)}return e},Ct=async()=>{let e="./.vscode/settings.json";if(!await a(e))return!1;try{let t=await ke(e,"utf-8"),s=ve(t);if(!s||typeof s!="object")return!1;let n=!1,o={...s},i=["editor.defaultFormatter","prettier.enable","prettier.requireConfig","prettier.configPath","prettier.printWidth","prettier.tabWidth","prettier.useTabs","prettier.semi","prettier.singleQuote","prettier.quoteProps","prettier.trailingComma","prettier.bracketSpacing","prettier.arrowParens","prettier.endOfLine"];for(let l of i)l in o&&(l==="editor.defaultFormatter"&&o[l]==="esbenp.prettier-vscode"||l!=="editor.defaultFormatter")&&(delete o[l],n=!0);let r=Object.keys(o).filter(l=>l.startsWith("[")&&l.includes("javascript"));for(let l of r){let u=o[l];u&&typeof u=="object"&&"editor.defaultFormatter"in u&&u["editor.defaultFormatter"]==="esbenp.prettier-vscode"&&(u["editor.defaultFormatter"]=void 0,n=!0,Object.keys(u).length===0&&delete o[l])}return n?(await vt(e,JSON.stringify(o,null,2)),!0):!1}catch(t){return console.warn(t),!1}},St=async()=>{if((await xe()).length>0)return!0;for(let t of U)if(await a(t))return!0;return!1},se={hasPrettier:St,remove:async e=>{let t=await xe();await Dt(e,t);let s=await jt(),n=await Ct();return{packagesRemoved:t,filesRemoved:s,vsCodeCleaned:n}}};var At=()=>{let e=Pt("npx @biomejs/biome --version",{shell:!0,encoding:"utf-8"});return e.status===0&&e.stdout?{name:"Biome installation",status:"pass",message:`Biome is installed (${e.stdout.trim()})`}:{name:"Biome installation",status:"fail",message:"Biome is not installed or not accessible"}},Mt=async()=>{let e=R(process.cwd(),"biome.json"),t=R(process.cwd(),"biome.jsonc"),s=null;if(P(e)?s=e:P(t)&&(s=t),!s)return{name:"Biome configuration",status:"fail",message:"No biome.json or biome.jsonc file found"};try{let n=await De(s,"utf-8"),o=Rt(n);return Array.isArray(o?.extends)&&o.extends.includes("ultracite")?{name:"Biome configuration",status:"pass",message:"biome.json(c) extends ultracite"}:{name:"Biome configuration",status:"warn",message:"biome.json(c) exists but doesn't extend ultracite"}}catch{return{name:"Biome configuration",status:"fail",message:"Could not parse biome.json(c) file"}}},Et=async()=>{let e=R(process.cwd(),"package.json");if(!P(e))return{name:"Ultracite dependency",status:"warn",message:"No package.json found"};try{let t=JSON.parse(await De(e,"utf-8")),s=t.dependencies?.ultracite||t.devDependencies?.ultracite||t.peerDependencies?.ultracite;return s?{name:"Ultracite dependency",status:"pass",message:`Ultracite is in package.json (${s})`}:{name:"Ultracite dependency",status:"warn",message:"Ultracite not found in package.json dependencies"}}catch{return{name:"Ultracite dependency",status:"warn",message:"Could not parse package.json"}}},$t=()=>{let e=U.some(s=>P(R(process.cwd(),s))),t=I.some(s=>P(R(process.cwd(),s)));if(e||t){let s=[];return e&&s.push("Prettier"),t&&s.push("ESLint"),{name:"Conflicting tools",status:"warn",message:`Found potentially conflicting tools: ${s.join(", ")}`}}return{name:"Conflicting tools",status:"pass",message:"No conflicting formatting/linting tools found"}},je=async()=>{let e=[];console.log(`\u{1FA7A} Running Ultracite doctor...
`),e.push(At()),e.push(await Mt()),e.push(await Et()),e.push($t());let t=e.filter(o=>o.status==="pass").length,s=e.filter(o=>o.status==="fail").length,n=e.filter(o=>o.status==="warn").length;for(let o of e){let i;o.status==="pass"?i="\u2705":o.status==="fail"?i="\u274C":i="\u26A0\uFE0F",console.log(`${i} ${o.name}: ${o.message}`)}console.log(`
\u{1F4CA} Summary:`),console.log(`   ${t} passed, ${n} warnings, ${s} failed`),s>0&&(console.log(`
\u{1F4A1} To fix issues, run: npx ultracite init`),process.exit(1)),n>0?console.log(`
\u{1F4A1} Some optional improvements available. Run 'npx ultracite init' to configure.`):console.log(`
\u2728 Everything looks good!`)};p();import{spawnSync as Ft}from"child_process";import Ce from"process";var ne=(e,t={})=>{let s=["npx","@biomejs/biome","check","--write","--no-errors-on-unmatched"];t.unsafe&&s.push("--unsafe"),e.length>0?s.push(...N(e)):s.push("./");let n=s.join(" "),o=Ft(n,{stdio:"inherit",shell:!0});o.error&&(console.error("Failed to run Ultracite:",o.error.message),Ce.exit(1)),o.status!==0&&Ce.exit(o.status??1)};import{packageManagers as Nt}from"nypm";var A={packageManagers:Nt.map(e=>e.name),editorConfigs:["vscode","zed"],editorRules:["vscode-copilot","cursor","windsurf","zed","claude","codex","kiro","cline","amp","aider","firebase-studio","open-hands","gemini-cli","junie","augmentcode","kilo-code","goose"],integrations:["husky","lefthook","lint-staged"]};import j from"process";import{cancel as W,intro as vs,isCancel as H,log as V,multiselect as X,spinner as m}from"@clack/prompts";import{addDevDependency as xs,detectPackageManager as Ds}from"nypm";p();import{readFile as It,writeFile as Se}from"fs/promises";import Ut from"deepmerge";import{parse as Tt}from"jsonc-parser";var Pe={$schema:"./node_modules/@biomejs/biome/configuration_schema.json",extends:["ultracite"]},oe=async()=>await a("./biome.json")?"./biome.json":"./biome.jsonc",T={exists:async()=>{let e=await oe();return a(e)},create:async()=>{let e=await oe();return Se(e,JSON.stringify(Pe,null,2))},update:async()=>{let e=await oe(),t=await It(e,"utf-8"),n=Tt(t)||{},o=n.extends&&Array.isArray(n.extends)?n.extends:[];o.includes("ultracite")||(n.extends=[...o,"ultracite"]);let i={$schema:Pe.$schema},r=Ut(n,i);await Se(e,JSON.stringify(r,null,2))}};p();import{spawnSync as Ot}from"child_process";import{mkdir as _t,readFile as Jt,writeFile as Re}from"fs/promises";import Lt from"deepmerge";import{parse as zt}from"jsonc-parser";var ie={"editor.defaultFormatter":"esbenp.prettier-vscode","[javascript]":{"editor.defaultFormatter":"biomejs.biome"},"[typescript]":{"editor.defaultFormatter":"biomejs.biome"},"[javascriptreact]":{"editor.defaultFormatter":"biomejs.biome"},"[typescriptreact]":{"editor.defaultFormatter":"biomejs.biome"},"[json]":{"editor.defaultFormatter":"biomejs.biome"},"[jsonc]":{"editor.defaultFormatter":"biomejs.biome"},"[css]":{"editor.defaultFormatter":"biomejs.biome"},"[graphql]":{"editor.defaultFormatter":"biomejs.biome"},"typescript.tsdk":"node_modules/typescript/lib","editor.formatOnSave":!0,"editor.formatOnPaste":!0,"emmet.showExpandedAbbreviation":"never","editor.codeActionsOnSave":{"source.fixAll.biome":"explicit","source.organizeImports.biome":"explicit"}};var O="./.vscode/settings.json",M={exists:()=>a(O),create:async()=>{await _t(".vscode",{recursive:!0}),await Re(O,JSON.stringify(ie,null,2))},update:async()=>{let e=await Jt(O,"utf-8"),s=zt(e)||{},n=Lt(s,ie);await Re(O,JSON.stringify(n,null,2))},extension:()=>Ot("code --install-extension biomejs.biome",{stdio:"inherit",shell:!0})};p();import{mkdir as Bt,readFile as qt,writeFile as Ae}from"fs/promises";import Gt from"deepmerge";import{parse as Wt}from"jsonc-parser";var ae={formatter:"language_server",format_on_save:"on",languages:{JavaScript:{formatter:{language_server:{name:"biome"}},code_actions_on_format:{"source.fixAll.biome":!0,"source.organizeImports.biome":!0}},TypeScript:{formatter:{language_server:{name:"biome"}},code_actions_on_format:{"source.fixAll.biome":!0,"source.organizeImports.biome":!0}},JSX:{formatter:{language_server:{name:"biome"}},code_actions_on_format:{"source.fixAll.biome":!0,"source.organizeImports.biome":!0}},TSX:{formatter:{language_server:{name:"biome"}},code_actions_on_format:{"source.fixAll.biome":!0,"source.organizeImports.biome":!0}}},lsp:{"typescript-language-server":{settings:{typescript:{preferences:{includePackageJsonAutoImports:"on"}}}}}};var _="./.zed/settings.json",J={exists:()=>a(_),create:async()=>{await Bt(".zed",{recursive:!0}),await Ae(_,JSON.stringify(ae,null,2))},update:async()=>{let e=await qt(_,"utf-8"),s=Wt(e)||{},n=Gt(s,ae);await Ae(_,JSON.stringify(n,null,2))}};import{mkdir as Ht,readFile as Vt,writeFile as L}from"fs/promises";import{dirname as Xt}from"path";var Me={"vscode-copilot":{path:"./.github/copilot-instructions.md",header:`---
applyTo: "**/*.{ts,tsx,js,jsx}"
---`,appendMode:!0},cursor:{path:"./.cursor/rules/ultracite.mdc",header:`---
description: Ultracite Rules - AI-Ready Formatter and Linter
globs: "**/*.{ts,tsx,js,jsx}"
alwaysApply: true
---`},windsurf:{path:"./.windsurf/rules/ultracite.md"},zed:{path:"./.rules",appendMode:!0},claude:{path:"./.claude/CLAUDE.md",appendMode:!0},codex:{path:"./AGENTS.md",appendMode:!0},kiro:{path:"./.kiro/steering/ultracite.md"},cline:{path:"./.clinerules",appendMode:!0},amp:{path:"./AGENT.md",appendMode:!0},aider:{path:"./ultracite.md"},"firebase-studio":{path:"./.idx/airules.md",appendMode:!0},"open-hands":{path:"./.openhands/microagents/repo.md",appendMode:!0},"gemini-cli":{path:"./GEMINI.md",appendMode:!0},junie:{path:"./.junie/guidelines.md",appendMode:!0},augmentcode:{path:"./.augment/rules/ultracite.md"},"kilo-code":{path:"./.kilocode/rules/ultracite.md"},goose:{path:"./.goosehints",appendMode:!0}};p();var Ee=["Don't use `accessKey` attribute on any HTML element.",'Don\'t set `aria-hidden="true"` on focusable elements.',"Don't add ARIA roles, states, and properties to elements that don't support them.","Don't use distracting elements like `<marquee>` or `<blink>`.","Only use the `scope` prop on `<th>` elements.","Don't assign non-interactive ARIA roles to interactive HTML elements.","Make sure label elements have text content and are associated with an input.","Don't assign interactive ARIA roles to non-interactive HTML elements.","Don't assign `tabIndex` to non-interactive HTML elements.","Don't use positive integers for `tabIndex` property.",`Don't include "image", "picture", or "photo" in img alt prop.`,"Don't use explicit role property that's the same as the implicit/default role.","Make static elements with click handlers use a valid role attribute.","Always include a `title` element for SVG elements.","Give all elements requiring alt text meaningful information for screen readers.","Make sure anchors have content that's accessible to screen readers.","Assign `tabIndex` to non-interactive HTML elements with `aria-activedescendant`.","Include all required ARIA attributes for elements with ARIA roles.","Make sure ARIA properties are valid for the element's supported roles.","Always include a `type` attribute for button elements.","Make elements with interactive roles and handlers focusable.","Give heading elements content that's accessible to screen readers (not hidden with `aria-hidden`).","Always include a `lang` attribute on the html element.","Always include a `title` attribute for iframe elements.","Accompany `onClick` with at least one of: `onKeyUp`, `onKeyDown`, or `onKeyPress`.","Accompany `onMouseOver`/`onMouseOut` with `onFocus`/`onBlur`.","Include caption tracks for audio and video elements.","Use semantic elements instead of role attributes in JSX.","Make sure all anchors are valid and navigable.","Ensure all ARIA properties (`aria-*`) are valid.","Use valid, non-abstract ARIA roles for elements with ARIA roles.","Use valid ARIA state and property values.","Use valid values for the `autocomplete` attribute on input elements.","Use correct ISO language/country codes for the `lang` attribute."],$e=["Don't use consecutive spaces in regular expression literals.","Don't use the `arguments` object.","Don't use primitive type aliases or misleading types.","Don't use the comma operator.","Don't use empty type parameters in type aliases and interfaces.","Don't write functions that exceed a given Cognitive Complexity score.","Don't nest describe() blocks too deeply in test files.","Don't use unnecessary boolean casts.","Don't use unnecessary callbacks with flatMap.","Use for...of statements instead of Array.forEach.","Don't create classes that only have static members (like a static namespace).","Don't use this and super in static contexts.","Don't use unnecessary catch clauses.","Don't use unnecessary constructors.","Don't use unnecessary continue statements.","Don't export empty modules that don't change anything.","Don't use unnecessary escape sequences in regular expression literals.","Don't use unnecessary fragments.","Don't use unnecessary labels.","Don't use unnecessary nested block statements.","Don't rename imports, exports, and destructured assignments to the same name.","Don't use unnecessary string or template literal concatenation.","Don't use String.raw in template literals when there are no escape sequences.","Don't use useless case statements in switch statements.","Don't use ternary operators when simpler alternatives exist.","Don't use useless `this` aliasing.","Don't use any or unknown as type constraints.","Don't initialize variables to undefined.","Don't use the void operators (they're not familiar).","Use arrow functions instead of function expressions.","Use Date.now() to get milliseconds since the Unix Epoch.","Use .flatMap() instead of map().flat() when possible.","Use literal property access instead of computed property access.","Don't use parseInt() or Number.parseInt() when binary, octal, or hexadecimal literals work.","Use concise optional chaining instead of chained logical expressions.","Use regular expression literals instead of the RegExp constructor when possible.","Don't use number literal object member names that aren't base 10 or use underscore separators.","Remove redundant terms from logical expressions.","Use while loops instead of for loops when you don't need initializer and update expressions.","Don't pass children as props.","Don't reassign const variables.","Don't use constant expressions in conditions.","Don't use `Math.min` and `Math.max` to clamp values when the result is constant.","Don't return a value from a constructor.","Don't use empty character classes in regular expression literals.","Don't use empty destructuring patterns.","Don't call global object properties as functions.","Don't declare functions and vars that are accessible outside their block.","Make sure builtins are correctly instantiated.","Don't use super() incorrectly inside classes. Also check that super() is called in classes that extend other constructors.","Don't use variables and function parameters before they're declared.","Don't use 8 and 9 escape sequences in string literals.","Don't use literal numbers that lose precision."],Fe=["Don't use the return value of React.render.","Make sure all dependencies are correctly specified in React hooks.","Make sure all React hooks are called from the top level of component functions.","Don't forget key props in iterators and collection literals.","Don't destructure props inside JSX components in Solid projects.","Don't define React components inside other components.","Don't use event handlers on non-interactive elements.","Don't assign to React component props.","Don't use both `children` and `dangerouslySetInnerHTML` props on the same element.","Don't use dangerous JSX props.","Don't use Array index in keys.","Don't insert comments as text nodes.","Don't assign JSX properties multiple times.","Don't add extra closing tags for components without children.","Use `<>...</>` instead of `<Fragment>...</Fragment>`.",'Watch out for possible "wrong" semicolons inside JSX elements.'],Ne=["Don't assign a value to itself.","Don't return a value from a setter.","Don't compare expressions that modify string case with non-compliant values.","Don't use lexical declarations in switch clauses.","Don't use variables that haven't been declared in the document.","Don't write unreachable code.","Make sure super() is called exactly once on every code path in a class constructor before this is accessed if the class has a superclass.","Don't use control flow statements in finally blocks.","Don't use optional chaining where undefined values aren't allowed.","Don't have unused function parameters.","Don't have unused imports.","Don't have unused labels.","Don't have unused private class members.","Don't have unused variables.","Make sure void (self-closing) elements don't have children.","Don't return a value from a function with the return type 'void'","Use isNaN() when checking for NaN.",'Make sure "for" loop update clauses move the counter in the right direction.',"Make sure typeof expressions are compared to valid values.","Make sure generator functions contain yield.","Don't use await inside loops.","Don't use bitwise operators.","Don't use expressions where the operation doesn't change the value.","Make sure Promise-like statements are handled appropriately.","Don't use __dirname and __filename in the global scope.","Prevent import cycles.","Don't use configured elements.","Don't hardcode sensitive data like API keys and tokens.","Don't let variable declarations shadow variables from outer scopes.","Don't use the TypeScript directive @ts-ignore.","Prevent duplicate polyfills from Polyfill.io.","Don't use useless backreferences in regular expressions that always match empty strings.","Don't use unnecessary escapes in string literals.","Don't use useless undefined.","Make sure getters and setters for the same property are next to each other in class and object definitions.","Make sure object literals are declared consistently (defaults to explicit definitions).","Use static Response methods instead of new Response() constructor when possible.","Make sure switch-case statements are exhaustive.","Make sure the `preconnect` attribute is used when using Google Fonts.","Use `Array#{indexOf,lastIndexOf}()` instead of `Array#{findIndex,findLastIndex}()` when looking for the index of an item.","Make sure iterable callbacks return consistent values.",'Use `with { type: "json" }` for JSON module imports.',"Use numeric separators in numeric literals.","Use object spread instead of `Object.assign()` when constructing new objects.","Always use the radix argument when using `parseInt()`.","Make sure JSDoc comment lines start with a single asterisk, except for the first one.","Include a description parameter for `Symbol()`.","Don't use spread (`...`) syntax on accumulators.","Don't use the `delete` operator.","Don't access namespace imports dynamically.","Don't use namespace imports.","Declare regex literals at the top level.",'Don\'t use `target="_blank"` without `rel="noopener"`.'],Ie=["Don't use TypeScript enums.","Don't export imported variables.","Don't add type annotations to variables, parameters, and class properties that are initialized with literal expressions.","Don't use TypeScript namespaces.","Don't use non-null assertions with the `!` postfix operator.","Don't use parameter properties in class constructors.","Don't use user-defined types.","Use `as const` instead of literal types and type annotations.","Use either `T[]` or `Array<T>` consistently.","Initialize each enum member value explicitly.","Use `export type` for types.","Use `import type` for types.","Make sure all enum members are literal values.","Don't use TypeScript const enum.","Don't declare empty interfaces.","Don't let variables evolve into any type through reassignments.","Don't use the any type.","Don't misuse the non-null assertion operator (!) in TypeScript files.","Don't use implicit any type on variable declarations.","Don't merge interfaces and classes unsafely.","Don't use overload signatures that aren't next to each other.","Use the namespace keyword instead of the module keyword to declare TypeScript namespaces."],Ue=["Don't use global `eval()`.","Don't use callbacks in asynchronous tests and hooks.","Don't use negation in `if` statements that have `else` clauses.","Don't use nested ternary expressions.","Don't reassign function parameters.","This rule lets you specify global variable names you don't want to use in your application.","Don't use specified modules when loaded by import or require.","Don't use constants whose value is the upper-case version of their name.","Use `String.slice()` instead of `String.substr()` and `String.substring()`.","Don't use template literals if you don't need interpolation or special-character handling.","Don't use `else` blocks when the `if` block breaks early.","Don't use yoda expressions.","Don't use Array constructors.","Use `at()` instead of integer index access.","Follow curly brace conventions.","Use `else if` instead of nested `if` statements in `else` clauses.","Use single `if` statements instead of nested `if` clauses.","Use `new` for all builtins except `String`, `Number`, and `Boolean`.","Use consistent accessibility modifiers on class properties and methods.","Use `const` declarations for variables that are only assigned once.","Put default function parameters and optional function parameters last.","Include a `default` clause in switch statements.","Use the `**` operator instead of `Math.pow`.","Use `for-of` loops when you need the index to extract an item from the iterated array.","Use `node:assert/strict` over `node:assert`.","Use the `node:` protocol for Node.js builtin modules.","Use Number properties instead of global ones.","Use assignment operator shorthand where possible.","Use function types instead of object types with call signatures.","Use template literals over string concatenation.","Use `new` when throwing an error.","Don't throw non-Error values.","Use `String.trimStart()` and `String.trimEnd()` over `String.trimLeft()` and `String.trimRight()`.","Use standard constants instead of approximated literals.","Don't assign values in expressions.","Don't use async functions as Promise executors.","Don't reassign exceptions in catch clauses.","Don't reassign class members.","Don't compare against -0.","Don't use labeled statements that aren't loops.","Don't use void type outside of generic or return types.","Don't use console.","Don't use control characters and escape sequences that match control characters in regular expression literals.","Don't use debugger.","Don't assign directly to document.cookie.","Use `===` and `!==`.","Don't use duplicate case labels.","Don't use duplicate class members.","Don't use duplicate conditions in if-else-if chains.","Don't use two keys with the same name inside objects.","Don't use duplicate function parameter names.","Don't have duplicate hooks in describe blocks.","Don't use empty block statements and static blocks.","Don't let switch clauses fall through.","Don't reassign function declarations.","Don't allow assignments to native objects and read-only global variables.","Use Number.isFinite instead of global isFinite.","Use Number.isNaN instead of global isNaN.","Don't assign to imported bindings.","Don't use irregular whitespace characters.","Don't use labels that share a name with a variable.","Don't use characters made with multiple code points in character class syntax.","Make sure to use new and constructor properly.","Don't use shorthand assign when the variable appears on both sides.","Don't use octal escape sequences in string literals.","Don't use Object.prototype builtins directly.","Don't redeclare variables, functions, classes, and types in the same scope.",`Don't have redundant "use strict".`,"Don't compare things where both sides are exactly the same.","Don't let identifiers shadow restricted names.","Don't use sparse arrays (arrays with holes).","Don't use template literal placeholder syntax in regular strings.","Don't use the then property.","Don't use unsafe negation.","Don't use var.","Don't use with statements in non-strict contexts.","Make sure async functions actually use await.","Make sure default clauses in switch statements come last.","Make sure to pass a message value when creating a built-in error.","Make sure get methods always return a value.","Use a recommended display strategy with Google Fonts.","Make sure for-in loops include an if statement.","Use Array.isArray() instead of instanceof Array.","Make sure to use the digits argument with Number#toFixed().",'Make sure to use the "use strict" directive in script files.'],Te=["Don't use `<img>` elements in Next.js projects.","Don't use `<head>` elements in Next.js projects.","Don't import next/document outside of pages/_document.jsx in Next.js projects.","Don't use the next/head module in pages/_document.js on Next.js projects."],Oe=["Don't use export or module.exports in test files.","Don't use focused tests.","Make sure the assertion function, like expect, is placed inside an it() function call.","Don't use disabled tests."],Jn=[...Ee,...$e,...Fe,...Ne,...Ie,...Ue,...Te,...Oe],E=`# Project Context
Ultracite enforces strict type safety, accessibility standards, and consistent code quality for JavaScript/TypeScript projects using Biome's lightning-fast formatter and linter.

## Key Principles
- Zero configuration required
- Subsecond performance
- Maximum type safety
- AI-friendly code generation

## Before Writing Code
1. Analyze existing patterns in the codebase
2. Consider edge cases and error scenarios
3. Follow the rules below strictly
4. Validate accessibility requirements

## Rules

### Accessibility (a11y)
${Ee.map(e=>`- ${e}`).join(`
`)}

### Code Complexity and Quality
${$e.map(e=>`- ${e}`).join(`
`)}

### React and JSX Best Practices
${Fe.map(e=>`- ${e}`).join(`
`)}

### Correctness and Safety
${Ne.map(e=>`- ${e}`).join(`
`)}

### TypeScript Best Practices
${Ie.map(e=>`- ${e}`).join(`
`)}

### Style and Consistency
${Ue.map(e=>`- ${e}`).join(`
`)}

### Next.js Specific Rules
${Te.map(e=>`- ${e}`).join(`
`)}

### Testing Best Practices
${Oe.map(e=>`- ${e}`).join(`
`)}

## Common Tasks
- \`npx ultracite init\` - Initialize Ultracite in your project
- \`npx ultracite fix\` - Format and fix code automatically
- \`npx ultracite check\` - Check for issues without fixing

## Example: Error Handling
\`\`\`typescript
// \u2705 Good: Comprehensive error handling
try {
  const result = await fetchData();
  return { success: true, data: result };
} catch (error) {
  console.error('API call failed:', error);
  return { success: false, error: error.message };
}

// \u274C Bad: Swallowing errors
try {
  return await fetchData();
} catch (e) {
  console.log(e);
}
\`\`\``;var _e=e=>{let t=Me[e],s=t.header?`${t.header}

${E}`:E,n=async()=>{let o=Xt(t.path);if(o!=="."){let i=o.startsWith("./")?o.slice(2):o;await Ht(i,{recursive:!0})}};return{exists:()=>a(t.path),create:async()=>{await n(),await L(t.path,s)},update:async()=>{if(await n(),t.appendMode){if(!await a(t.path)){await L(t.path,s);return}let o=await Vt(t.path,"utf-8");if(o.includes(E.trim()))return;await L(t.path,`${o}

${E}`)}else await L(t.path,s)}}};re();ce();de();p();import{readFile as ws,writeFile as Ye}from"fs/promises";import bs from"deepmerge";import{parse as ks}from"jsonc-parser";var Ke={compilerOptions:{strictNullChecks:!0}},q="./tsconfig.json",G={exists:()=>a(q),create:()=>Ye(q,JSON.stringify(Ke,null,2)),update:async()=>{let e=await ws(q,"utf-8"),s=ks(e)||{},n=bs(s,Ke);await Ye(q,JSON.stringify(n,null,2))}};p();var Ze=y.devDependencies["@biomejs/biome"],Qe=y.version,js=async(e,t=!0)=>{let s=m();s.start("Installing dependencies...");let n=[`ultracite@${Qe}`,`@biomejs/biome@${Ze}`];if(t)for(let o of n)await xs(o,{packageManager:e,workspace:await g()});else await S({devDependencies:{"@biomejs/biome":Ze,ultracite:Qe}});s.stop("Dependencies installed.")},Cs=async()=>{let e=m();if(e.start("Checking for tsconfig.json..."),await G.exists()){e.message("tsconfig.json found, updating..."),await G.update(),e.stop("tsconfig.json updated.");return}e.message("tsconfig.json not found, creating..."),await G.create(),e.stop("tsconfig.json created.")},Ss=async()=>{let e=m();if(e.start("Checking for .vscode/settings.json..."),await M.exists()){e.message("settings.json found, updating..."),await M.update(),e.stop("settings.json updated.");return}e.message("settings.json not found, creating..."),await M.create(),e.message("settings.json created."),e.message("Installing Biome extension...");try{M.extension(),e.stop("settings.json created.")}catch(t){e.stop(`Failed to install Biome extension (${t}), but continuing...`)}},Ps=async()=>{let e=m();if(e.start("Checking for .zed/settings.json..."),await J.exists()){e.message("settings.json found, updating..."),await J.update(),e.stop("settings.json updated.");return}e.message("settings.json not found, creating..."),await J.create(),e.message("settings.json created. Install the Biome extension: https://biomejs.dev/reference/zed/")},Rs=async()=>{let e=m();if(e.start("Checking for Biome configuration..."),await T.exists()){e.message("Biome configuration found, updating..."),await T.update(),e.stop("Biome configuration updated.");return}e.message("Biome configuration not found, creating..."),await T.create(),e.stop("Biome configuration created.")},As=async(e,t=!0)=>{let s=m();if(s.start("Initializing pre-commit hooks..."),s.message("Installing Husky..."),t?await v.install(e):await S({devDependencies:{husky:"latest"}}),await v.exists()){s.message("Pre-commit hook found, updating..."),await v.update(e),s.stop("Pre-commit hook updated.");return}s.message("Pre-commit hook not found, creating..."),await v.create(e),s.stop("Pre-commit hook created.")},Ms=async(e,t=!0)=>{let s=m();if(s.start("Initializing lefthook..."),s.message("Installing lefthook..."),t?await x.install(e):await S({devDependencies:{lefthook:"latest"}}),await x.exists()){s.message("lefthook.yml found, updating..."),await x.update(e),s.stop("lefthook.yml updated.");return}s.message("lefthook.yml not found, creating..."),await x.create(e),s.stop("lefthook.yml created.")},Es=async(e,t=!0)=>{let s=m();if(s.start("Initializing lint-staged..."),s.message("Installing lint-staged..."),t?await D.install(e):await S({devDependencies:{"lint-staged":"latest"}}),await D.exists()){s.message("lint-staged found, updating..."),await D.update(e),s.stop("lint-staged updated.");return}s.message("lint-staged not found, creating..."),await D.create(e),s.stop("lint-staged created.")},$s=async(e,t)=>{let s=m();s.start(`Checking for ${t}...`);let n=_e(e);if(await n.exists()){s.message(`${t} found, updating...`),await n.update(),s.stop(`${t} updated.`);return}s.message(`${t} not found, creating...`),await n.create(),s.stop(`${t} created.`)},Fs=async e=>{let t=m();t.start("Removing Prettier dependencies and configuration...");try{let s=await se.remove(e);s.packagesRemoved.length>0&&t.message(`Removed Prettier packages: ${s.packagesRemoved.join(", ")}`),s.filesRemoved.length>0&&t.message(`Removed config files: ${s.filesRemoved.join(", ")}`),s.vsCodeCleaned&&t.message("Cleaned VS Code settings"),t.stop("Prettier removed successfully.")}catch{t.stop("Failed to remove Prettier completely, but continuing...")}},Ns=async e=>{let t=m();t.start("Removing ESLint dependencies and configuration...");try{let s=await te.remove(e);s.packagesRemoved.length>0&&t.message(`Removed ESLint packages: ${s.packagesRemoved.join(", ")}`),s.filesRemoved.length>0&&t.message(`Removed config files: ${s.filesRemoved.join(", ")}`),s.vsCodeCleaned&&t.message("Cleaned VS Code settings"),t.stop("ESLint removed successfully.")}catch{t.stop("Failed to remove ESLint completely, but continuing...")}},et=async e=>{vs(ge);try{let t=e??{},{pm:s}=t;if(!s){let d=await Ds(j.cwd());if(!d)throw new Error("No package manager specified or detected");if(d.warnings)for(let f of d.warnings)V.warn(f);V.info(`Detected lockfile, using ${d.name}`),s=d.name}let n=t.removePrettier,o=t.removeEslint;if(n===void 0||o===void 0){let d=[];if(n===void 0&&await se.hasPrettier()&&d.push({label:"Remove Prettier (dependencies, config files, VS Code settings)",value:"prettier"}),o===void 0&&await te.hasEsLint()&&d.push({label:"Remove ESLint (dependencies, config files, VS Code settings)",value:"eslint"}),d.length>0){let f=await X({message:"Remove existing formatters/linters (recommended for clean migration)?",options:d,required:!1});H(f)&&(W("Operation cancelled."),j.exit(0)),n===void 0&&(n=f.includes("prettier")),o===void 0&&(o=f.includes("eslint"))}}let i=t.editors;if(!i){let d=await X({message:"Which editors do you want to configure (recommended)?",options:[{label:"VSCode / Cursor / Windsurf",value:"vscode"},{label:"Zed",value:"zed"}],required:!1});H(d)&&(W("Operation cancelled."),j.exit(0)),i=d}let r=t.rules,l={"vscode-copilot":"GitHub Copilot (VSCode)",cursor:"Cursor",windsurf:"Windsurf",zed:"Zed",claude:"Claude Code",codex:"OpenAI Codex / Jules / OpenCode",kiro:"Kiro IDE",cline:"Cline",amp:"AMP",aider:"Aider","firebase-studio":"Firebase Studio","open-hands":"Open Hands","gemini-cli":"Gemini CLI",junie:"Junie",augmentcode:"Augment Code","kilo-code":"Kilo Code",goose:"Codename Goose"};if(!r){let d=await X({message:"Which editor rules do you want to enable (optional)?",options:Object.entries(l).map(([f,tt])=>({value:f,label:tt})),required:!1});H(d)&&(W("Operation cancelled."),j.exit(0)),r=d}let u=t.integrations;if(u===void 0)if(t.pm||t.editors||t.rules||t.removePrettier!==void 0||t.removeEslint!==void 0)u=[];else{let f=await X({message:"Would you like any of the following (optional)?",options:[{label:"Husky pre-commit hook",value:"husky"},{label:"Lefthook pre-commit hook",value:"lefthook"},{label:"Lint-staged",value:"lint-staged"}],required:!1});H(f)&&(W("Operation cancelled."),j.exit(0)),u=f}n&&await Fs(s),o&&await Ns(s),await js(s,!t.skipInstall),await Cs(),await Rs(),i?.includes("vscode")&&await Ss(),i?.includes("zed")&&await Ps();for(let d of r??[])await $s(d,l[d]);u?.includes("husky")&&await As(s,!t.skipInstall),u?.includes("lefthook")&&await Ms(s,!t.skipInstall),u?.includes("lint-staged")&&await Es(s,!t.skipInstall),V.success("Successfully initialized Ultracite configuration!")}catch(t){let s=t instanceof Error?t.message:"Unknown error";V.error(`Failed to initialize Ultracite configuration: ${s}`),j.exit(1)}};var k=Is.meta().create(),Ts=k.router({init:k.procedure.meta({description:"Initialize Ultracite in the current directory"}).input(c.object({pm:c.enum(A.packageManagers).optional().describe("Package manager to use"),editors:c.array(c.enum(A.editorConfigs)).optional().describe("Editors to configure"),rules:c.array(c.enum(A.editorRules)).optional().describe("Editor rules to enable"),integrations:c.array(c.enum(A.integrations)).optional().describe("Additional integrations to enable"),removePrettier:c.boolean().optional().describe("Remove Prettier dependencies and configuration"),removeEslint:c.boolean().optional().describe("Remove ESLint dependencies and configuration"),skipInstall:c.boolean().default(!1).describe("Skip installing dependencies")})).mutation(async({input:e})=>{await et(e)}),check:k.procedure.meta({description:"Run Biome linter without fixing files"}).input(c.array(c.string()).optional().default([]).describe("specific files to lint")).query(({input:e})=>{ee(e)}),fix:k.procedure.meta({description:"Run Biome linter and fixes files"}).input(c.tuple([c.array(c.string()).optional().default([]).describe("specific files to format"),c.object({unsafe:c.boolean().optional().describe("apply unsafe fixes")})])).mutation(({input:e})=>{let[t,s]=e;ne(t,{unsafe:s.unsafe})}),doctor:k.procedure.meta({description:"Verify your Ultracite setup and check for issues"}).query(async()=>{await je()}),lint:k.procedure.meta({description:"\u26A0\uFE0F DEPRECATED: Use 'check' instead - Run Biome linter without fixing files"}).input(c.array(c.string()).optional().default([]).describe("specific files to lint")).query(({input:e})=>{console.warn("\u26A0\uFE0F  Warning: 'lint' command is deprecated. Please use 'check' instead."),ee(e)}),format:k.procedure.meta({description:"\u26A0\uFE0F DEPRECATED: Use 'fix' instead - Run Biome linter and fixes files"}).input(c.tuple([c.array(c.string()).optional().default([]).describe("specific files to format"),c.object({unsafe:c.boolean().optional().describe("apply unsafe fixes")})])).mutation(({input:e})=>{let[t,s]=e;console.warn("\u26A0\uFE0F  Warning: 'format' command is deprecated. Please use 'fix' instead."),ne(t,{unsafe:s.unsafe})})}),Os=Us({router:Ts,name:y.name,version:y.version,description:y.description});process.env.VITEST||Os.run();export{Ts as router};
